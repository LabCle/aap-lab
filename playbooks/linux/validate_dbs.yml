---
- name: Validar bancos de dados MySQL e PostgreSQL
  hosts: linux
  become: true
  tasks:
    ######################################################################
    # Validação MySQL
    ######################################################################
    - name: Validar bancos MySQL
      community.mysql.mysql_info:
        login_user: root
        login_password: "SenhaForte123"
      register: mysql_info
      ignore_errors: true

    - name: Exibir bancos MySQL
      debug:
        var: mysql_info.databases
      when: mysql_info is defined

    ######################################################################
    # Validação PostgreSQL
    ######################################################################
    - name: Validar bancos PostgreSQL (com usuário dedicado)
      community.postgresql.postgresql_info:
        login_user: pguser
        login_password: "PgPass123"
        db: labpg
      register: pg_info
      become_user: postgres
      ignore_errors: true

    - name: Exibir bancos PostgreSQL
      debug:
        var: pg_info.databases
      when: pg_info is defined
